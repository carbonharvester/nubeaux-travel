<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Earnings | JUNO Creator Portal</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --color-bg: #fafafa;
      --color-white: #ffffff;
      --color-text: #1a1a1a;
      --color-text-light: #6b6b6b;
      --color-border: #e5e5e5;
      --color-accent: #c2703e;
      --color-accent-light: #f5ebe4;
      --color-success: #22c55e;
      --color-warning: #f59e0b;
      --color-info: #3b82f6;
      --color-error: #ef4444;
      --font-sans: 'Inter', -apple-system, sans-serif;
      --font-serif: 'Playfair Display', Georgia, serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-sans);
      background: var(--color-bg);
      color: var(--color-text);
      line-height: 1.6;
    }

    .portal-layout {
      display: grid;
      grid-template-columns: 260px 1fr;
      min-height: 100vh;
    }

    .sidebar {
      background: var(--color-white);
      border-right: 1px solid var(--color-border);
      padding: 24px;
      position: sticky;
      top: 0;
      height: 100vh;
    }

    .sidebar-logo {
      font-family: var(--font-serif);
      font-size: 1.25rem;
      margin-bottom: 32px;
      color: var(--color-accent);
    }

    .sidebar-nav a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 8px;
      color: var(--color-text-light);
      text-decoration: none;
      font-size: 0.9375rem;
      margin-bottom: 4px;
      transition: all 0.2s;
    }

    .sidebar-nav a:hover,
    .sidebar-nav a.active {
      background: var(--color-accent-light);
      color: var(--color-accent);
    }

    .sidebar-nav svg { width: 20px; height: 20px; }

    .sidebar-profile {
      position: absolute;
      bottom: 24px;
      left: 24px;
      right: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--color-bg);
      border-radius: 8px;
    }

    .sidebar-profile img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }

    .sidebar-profile-info { flex: 1; min-width: 0; }
    .sidebar-profile-name { font-weight: 500; font-size: 0.875rem; }
    .sidebar-profile-status { font-size: 0.75rem; color: var(--color-text-light); }

    .main-content { padding: 32px 40px; max-width: 1000px; }

    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
    }

    .page-title {
      font-family: var(--font-serif);
      font-size: 1.75rem;
      font-weight: 500;
    }

    /* Tier Card */
    .tier-card {
      background: linear-gradient(135deg, #c2703e 0%, #a85d32 100%);
      color: white;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 32px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .tier-info h3 {
      font-size: 0.6875rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      opacity: 0.8;
      margin-bottom: 8px;
    }

    .tier-name {
      font-family: var(--font-serif);
      font-size: 2rem;
      font-weight: 400;
      margin-bottom: 4px;
    }

    .tier-rate {
      font-size: 1.125rem;
      opacity: 0.9;
    }

    .tier-progress h3 {
      font-size: 0.6875rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      opacity: 0.8;
      margin-bottom: 8px;
    }

    .progress-bar {
      background: rgba(255,255,255,0.3);
      border-radius: 8px;
      height: 8px;
      margin-bottom: 8px;
      overflow: hidden;
    }

    .progress-fill {
      background: white;
      height: 100%;
      border-radius: 8px;
      transition: width 0.5s ease;
    }

    .progress-text {
      font-size: 0.875rem;
      opacity: 0.9;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: var(--color-white);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid var(--color-border);
    }

    .stat-label {
      font-size: 0.875rem;
      color: var(--color-text-light);
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 1.75rem;
      font-weight: 600;
    }

    .stat-value.earnings { color: var(--color-success); }
    .stat-value.gmv { color: var(--color-accent); }
    .stat-subtext {
      font-size: 0.75rem;
      color: var(--color-text-light);
      margin-top: 4px;
    }

    /* Sections */
    .section {
      background: var(--color-white);
      border-radius: 12px;
      border: 1px solid var(--color-border);
      margin-bottom: 24px;
      overflow: hidden;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      border-bottom: 1px solid var(--color-border);
    }

    .section-title {
      font-size: 1.125rem;
      font-weight: 500;
    }

    .section-subtitle {
      font-size: 0.8125rem;
      color: var(--color-text-light);
    }

    .section-content { padding: 24px; }

    /* Table */
    .table {
      width: 100%;
      border-collapse: collapse;
    }

    .table th,
    .table td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--color-border);
    }

    .table th {
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-light);
      background: #fafafa;
    }

    .table td { font-size: 0.875rem; }
    .table tr:last-child td { border-bottom: none; }
    .table tr:hover td { background: #fafafa; }

    .amount-positive { color: var(--color-success); font-weight: 500; }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      border: none;
      font-family: inherit;
    }

    .btn-primary {
      background: var(--color-accent);
      color: white;
    }

    .btn-primary:hover { background: #a85d32; }

    .btn-outline {
      background: transparent;
      border: 1px solid var(--color-border);
      color: var(--color-text);
    }

    .btn-outline:hover {
      border-color: var(--color-accent);
      color: var(--color-accent);
    }

    .btn svg { width: 16px; height: 16px; }

    /* Tax Documents */
    .tax-documents {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .tax-doc-card {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      border: 1px solid var(--color-border);
      border-radius: 8px;
      transition: all 0.2s;
    }

    .tax-doc-card:hover {
      border-color: var(--color-accent);
      background: var(--color-accent-light);
    }

    .tax-doc-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: var(--color-accent-light);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--color-accent);
    }

    .tax-doc-info { flex: 1; }
    .tax-doc-title { font-weight: 500; font-size: 0.9375rem; }
    .tax-doc-desc { font-size: 0.8125rem; color: var(--color-text-light); }

    .tax-doc-download {
      color: var(--color-accent);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .tax-doc-download:hover { text-decoration: underline; }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 48px;
      color: var(--color-text-light);
    }

    .empty-state svg {
      width: 48px;
      height: 48px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .portal-layout { grid-template-columns: 1fr; }
      .sidebar { display: none; }
      .main-content { padding: 24px; }
      .stats-grid { grid-template-columns: 1fr; }
      .tier-card { grid-template-columns: 1fr; }
      .tax-documents { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="portal-layout">
    <aside class="sidebar">
      <div class="sidebar-logo">JUNO Creator</div>

      <nav class="sidebar-nav">
        <a href="index.html">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          Dashboard
        </a>
        <a href="itineraries.html">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          My Itineraries
        </a>
        <a href="bookings.html">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
          Bookings
        </a>
        <a href="earnings.html" class="active">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
          Earnings
        </a>
        <a href="analytics.html">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
          Analytics
        </a>
        <a href="settings.html">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          Settings
        </a>
      </nav>

      <div class="sidebar-profile">
        <img src="https://res.cloudinary.com/dng12bd0a/image/upload/c_fill,w_80,h_80,q_auto,f_auto/v1769949588/RNI-Films-IMG-3CFAE959-6D3F-4C6A-96D4-F3158BB2F3E8_shblk6.jpg" alt="Profile" id="sidebarAvatar">
        <div class="sidebar-profile-info">
          <div class="sidebar-profile-name" id="sidebarName">Creator</div>
          <div class="sidebar-profile-status">Active</div>
        </div>
      </div>
    </aside>

    <main class="main-content">
      <header class="page-header">
        <h1 class="page-title">Earnings</h1>
      </header>

      <!-- Current Tier -->
      <div class="tier-card">
        <div class="tier-info">
          <h3>Current Tier</h3>
          <div class="tier-name" id="tierName">Tier 1</div>
          <div class="tier-rate" id="tierRate">40% Commission Rate</div>
        </div>
        <div class="tier-progress">
          <h3>Progress to Next Tier</h3>
          <div class="progress-bar">
            <div class="progress-fill" id="tierProgress" style="width: 35%;"></div>
          </div>
          <div class="progress-text" id="tierProgressText">$105,000 / $300,000 TTM GMV</div>
        </div>
      </div>

      <!-- Summary Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">Total Earnings (YTD)</div>
          <div class="stat-value earnings" id="totalEarnings">$4,250</div>
          <div class="stat-subtext">From 12 confirmed bookings</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">TTM Gross Merchandise Value</div>
          <div class="stat-value gmv" id="ttmGmv">$105,000</div>
          <div class="stat-subtext">Trailing 12 months</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Pending Payouts</div>
          <div class="stat-value" id="pendingPayouts">$850</div>
          <div class="stat-subtext">Next payout: Feb 15</div>
        </div>
      </div>

      <!-- Monthly Earnings -->
      <div class="section">
        <div class="section-header">
          <div>
            <h2 class="section-title">Monthly Earnings</h2>
            <p class="section-subtitle">Commission earned from confirmed bookings</p>
          </div>
          <button class="btn btn-outline" onclick="downloadEarningsCSV()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            Download CSV
          </button>
        </div>
        <table class="table" id="earningsTable">
          <thead>
            <tr>
              <th>Month</th>
              <th>Bookings</th>
              <th>GMV</th>
              <th>Commission %</th>
              <th>Earnings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>January 2026</td>
              <td>3</td>
              <td>$28,500</td>
              <td>40%</td>
              <td class="amount-positive">$1,140</td>
            </tr>
            <tr>
              <td>December 2025</td>
              <td>4</td>
              <td>$35,200</td>
              <td>40%</td>
              <td class="amount-positive">$1,408</td>
            </tr>
            <tr>
              <td>November 2025</td>
              <td>2</td>
              <td>$18,000</td>
              <td>40%</td>
              <td class="amount-positive">$720</td>
            </tr>
            <tr>
              <td>October 2025</td>
              <td>3</td>
              <td>$24,600</td>
              <td>40%</td>
              <td class="amount-positive">$984</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Tax Documents -->
      <div class="section">
        <div class="section-header">
          <div>
            <h2 class="section-title">Tax Documents</h2>
            <p class="section-subtitle">Download your tax documentation for record-keeping</p>
          </div>
        </div>
        <div class="section-content">
          <div class="tax-documents">
            <div class="tax-doc-card">
              <div class="tax-doc-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
              </div>
              <div class="tax-doc-info">
                <div class="tax-doc-title">2025 Annual Summary</div>
                <div class="tax-doc-desc">Total earnings: $8,420 from 24 bookings</div>
              </div>
              <a href="#" class="tax-doc-download" onclick="downloadTaxSummary(2025)">Download</a>
            </div>
            <div class="tax-doc-card">
              <div class="tax-doc-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
              </div>
              <div class="tax-doc-info">
                <div class="tax-doc-title">2024 Annual Summary</div>
                <div class="tax-doc-desc">Total earnings: $3,150 from 9 bookings</div>
              </div>
              <a href="#" class="tax-doc-download" onclick="downloadTaxSummary(2024)">Download</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Commission Info -->
      <div class="section">
        <div class="section-header">
          <div>
            <h2 class="section-title">How Earnings Work</h2>
            <p class="section-subtitle">Commission tiers based on your trailing 12-month GMV</p>
          </div>
        </div>
        <div class="section-content">
          <table class="table">
            <thead>
              <tr>
                <th>Tier</th>
                <th>TTM GMV Range</th>
                <th>Commission Rate</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Tier 0</td>
                <td>$0 - $50,000</td>
                <td>35%</td>
              </tr>
              <tr>
                <td>Tier 1</td>
                <td>$50,000 - $300,000</td>
                <td>40%</td>
              </tr>
              <tr>
                <td>Tier 2</td>
                <td>$300,000 - $1,000,000</td>
                <td>45%</td>
              </tr>
              <tr>
                <td>Tier 3</td>
                <td>$1,000,000 - $3,000,000</td>
                <td>50%</td>
              </tr>
              <tr>
                <td>Tier 4</td>
                <td>$3,000,000+</td>
                <td>55%</td>
              </tr>
            </tbody>
          </table>
          <p style="margin-top: 16px; font-size: 0.8125rem; color: var(--color-text-light);">
            Your tier is based on your Trailing Twelve Month (TTM) gross merchandise value. If your GMV drops below your tier threshold, you have a 6-month grace period before downgrading.
          </p>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Check auth
    const session = localStorage.getItem('juno_creator_session');
    if (!session) {
      window.location.href = 'login.html';
    }

    const sessionData = session ? JSON.parse(session) : null;
    if (sessionData) {
      document.getElementById('sidebarName').textContent = sessionData.email?.split('@')[0] || 'Creator';
    }

    // Commission tier calculation
    const TIERS = [
      { name: 'Tier 0', min: 0, max: 50000, rate: 35 },
      { name: 'Tier 1', min: 50000, max: 300000, rate: 40 },
      { name: 'Tier 2', min: 300000, max: 1000000, rate: 45 },
      { name: 'Tier 3', min: 1000000, max: 3000000, rate: 50 },
      { name: 'Tier 4', min: 3000000, max: Infinity, rate: 55 }
    ];

    function getTier(gmv) {
      return TIERS.find(t => gmv >= t.min && gmv < t.max) || TIERS[0];
    }

    function getNextTier(gmv) {
      const currentTier = getTier(gmv);
      const index = TIERS.indexOf(currentTier);
      return index < TIERS.length - 1 ? TIERS[index + 1] : null;
    }

    function updateTierDisplay(gmv) {
      const tier = getTier(gmv);
      const nextTier = getNextTier(gmv);

      document.getElementById('tierName').textContent = tier.name;
      document.getElementById('tierRate').textContent = `${tier.rate}% Commission Rate`;
      document.getElementById('ttmGmv').textContent = formatCurrency(gmv);

      if (nextTier) {
        const progress = ((gmv - tier.min) / (tier.max - tier.min)) * 100;
        document.getElementById('tierProgress').style.width = `${Math.min(progress, 100)}%`;
        document.getElementById('tierProgressText').textContent = `${formatCurrency(gmv)} / ${formatCurrency(tier.max)} TTM GMV`;
      } else {
        document.getElementById('tierProgress').style.width = '100%';
        document.getElementById('tierProgressText').textContent = 'Maximum tier reached';
      }
    }

    function formatCurrency(amount) {
      return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(amount);
    }

    function downloadEarningsCSV() {
      const rows = [['Month', 'Bookings', 'GMV', 'Commission %', 'Earnings']];
      document.querySelectorAll('#earningsTable tbody tr').forEach(tr => {
        const cells = tr.querySelectorAll('td');
        rows.push([...cells].map(td => td.textContent.trim()));
      });

      const csv = rows.map(r => r.join(',')).join('\n');
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'juno-earnings-statement.csv';
      a.click();
      URL.revokeObjectURL(url);
    }

    function downloadTaxSummary(year) {
      // Generate a simple PDF-like summary (in real app, this would call an API)
      const content = `
JUNO TRAVEL - CREATOR EARNINGS SUMMARY
Year: ${year}
====================================

Creator: ${sessionData?.email || 'Creator'}
Report Generated: ${new Date().toLocaleDateString()}

ANNUAL TOTALS
-------------
Total Gross Merchandise Value: ${year === 2025 ? '$105,000' : '$45,000'}
Total Commission Earned: ${year === 2025 ? '$8,420' : '$3,150'}
Total Confirmed Bookings: ${year === 2025 ? '24' : '9'}

QUARTERLY BREAKDOWN
-------------------
Q1: ${year === 2025 ? '$2,100' : '$750'}
Q2: ${year === 2025 ? '$2,450' : '$850'}
Q3: ${year === 2025 ? '$1,870' : '$800'}
Q4: ${year === 2025 ? '$2,000' : '$750'}

This document is for informational purposes only.
Please consult a tax professional for tax advice.

JUNO Travel
hello@junotravel.com
      `.trim();

      const blob = new Blob([content], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `juno-tax-summary-${year}.txt`;
      a.click();
      URL.revokeObjectURL(url);
    }

    // Initialize with sample data
    updateTierDisplay(105000);
  </script>
</body>
</html>
